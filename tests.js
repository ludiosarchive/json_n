import {test} from 'zora';
import {parse} from './index.js'

test(`empty objects`, (A) => {
    A.eq(parse('{}'), {});
    A.eq(parse('[]'), []);
})

test(`not confused by numbers in strings`, (A) => {
    A.eq(parse('{"a": "999", "b": 123}'), {"a": "999", "b": 123n});
    A.eq(parse('{"a": "9\\" 9,\\"9", "b": 123}'), {"a": "9\" 9,\"9", "b": 123n});
})

test(`correct numbers are parsed from arrays`, (A) => {
    A.eq(parse(`[
        -1e100,
        -9007199254740993,
        -9007199254740992,
        -9007199254740991,
        -9007199254740990,
        -1.0,
        -1,
        -1.5e-100,
        -1e-100,
        -0,
        0,
        1e-100,
        1.5e-100,
        1,
        1.0,
        9007199254740990,
        9007199254740991,
        9007199254740992,
        9007199254740993,
        1e100
    ]`), [
        -1e100,
        -9007199254740993n,
        -9007199254740992n,
        -9007199254740991n,
        -9007199254740990n,
        -1.0,
        -1n,
        -1.5e-100,
        -1e-100,
        0n,
        0n,
        1e-100,
        1.5e-100,
        1n,
        1.0,
        9007199254740990n,
        9007199254740991n,
        9007199254740992n,
        9007199254740993n,
        1e100
    ]);
})
